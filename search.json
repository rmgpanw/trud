[{"path":"https://rmgpanw.github.io/trud/LICENSE.html","id":null,"dir":"","previous_headings":"","what":"MIT License","title":"MIT License","text":"Copyright (c) 2024 trud authors Permission hereby granted, free charge, person obtaining copy software associated documentation files (“Software”), deal Software without restriction, including without limitation rights use, copy, modify, merge, publish, distribute, sublicense, /sell copies Software, permit persons Software furnished , subject following conditions: copyright notice permission notice shall included copies substantial portions Software. SOFTWARE PROVIDED “”, WITHOUT WARRANTY KIND, EXPRESS IMPLIED, INCLUDING LIMITED WARRANTIES MERCHANTABILITY, FITNESS PARTICULAR PURPOSE NONINFRINGEMENT. EVENT SHALL AUTHORS COPYRIGHT HOLDERS LIABLE CLAIM, DAMAGES LIABILITY, WHETHER ACTION CONTRACT, TORT OTHERWISE, ARISING , CONNECTION SOFTWARE USE DEALINGS SOFTWARE.","code":""},{"path":"https://rmgpanw.github.io/trud/authors.html","id":null,"dir":"","previous_headings":"","what":"Authors","title":"Authors and Citation","text":"Alasdair Warwick. Author, maintainer, copyright holder.","code":""},{"path":"https://rmgpanw.github.io/trud/authors.html","id":"citation","dir":"","previous_headings":"","what":"Citation","title":"Authors and Citation","text":"Warwick (2024). trud: Query NHS TRUD API. R package version 0.0.0.9000,  https://github.com/rmgpanw/trud, https://rmgpanw.github.io/trud/.","code":"@Manual{,   title = {trud: Query the NHS TRUD API},   author = {Alasdair Warwick},   year = {2024},   note = {R package version 0.0.0.9000,  https://github.com/rmgpanw/trud},   url = {https://rmgpanw.github.io/trud/}, }"},{"path":"https://rmgpanw.github.io/trud/index.html","id":"trud-","dir":"","previous_headings":"","what":"Query the NHS TRUD API","title":"Query the NHS TRUD API","text":"goal trud provide convenient R interface NHS TRUD API.","code":""},{"path":"https://rmgpanw.github.io/trud/index.html","id":"installation","dir":"","previous_headings":"","what":"Installation","title":"Query the NHS TRUD API","text":"can install development version trud GitHub : also need : Sign account NHS TRUD Set API key (shown account information page) environmental variable named TRUD_API_KEY. best way placing API key .Renviron file.","code":"# install.packages(\"devtools\") devtools::install_github(\"rmgpanw/trud\")"},{"path":"https://rmgpanw.github.io/trud/index.html","id":"examples","dir":"","previous_headings":"","what":"Examples","title":"Query the NHS TRUD API","text":"Retrieve available endpoints: Get metadata item: Download item:","code":"library(trud)  trud_items() #> # A tibble: 68 × 2 #>    item_number item_name                                                    #>          <int> <chr>                                                        #>  1         246 Cancer Outcomes and Services Data Set XML Schema             #>  2         245 Commissioning Data Set XML Schema                            #>  3         599 Community Services Data Set Intermediate Database            #>  4         393 Community Services Data Set post-deadline extract XML Schema #>  5         394 Community Services Data Set pre-deadline extract XML Schema  #>  6         391 Community Services Data Set XML Schema                       #>  7         248 Diagnostic Imaging Data Set XML Schema                       #>  8         239 dm+d XML transformation tool                                 #>  9        1819 Emergency Care Data Set XML Schema                           #> 10         263 eViewer application                                          #> # ℹ 58 more rows # default is to retrieve metadata for the latest release only get_item_metadata(1760) |>   lobstr::tree() #> <list> #> ├─apiVersion: \"1\" #> ├─releases: <list> #> │ └─CHC_JSON_v1.0.2.zip: <list> #> │   ├─id: \"CHC_JSON_v1.0.2.zip\" #> │   ├─name: \"Release 1.0.2 preview 1\" #> │   ├─releaseDate: \"2022-02-02\" #> │   ├─archiveFileUrl: \"https://isd.digital.nhs.uk/downl...\" #> │   ├─archiveFileName: \"CHC_JSON_v1.0.2.zip\" #> │   ├─archiveFileSizeBytes: 22107 #> │   ├─archiveFileSha256: \"B2801BA1944157CA63F0FE82802FD862...\" #> │   ├─archiveFileLastModifiedTimestamp: \"2022-02-02T09:13:27.000Z\" #> │   ├─checksumFileUrl: \"https://isd.digital.nhs.uk/downl...\" #> │   ├─checksumFileName: \"trud_CHC_JSON_v1.0.2.xml\" #> │   ├─checksumFileSizeBytes: 160 #> │   ├─checksumFileLastModifiedTimestamp: \"2022-02-02T09:21:58.000Z\" #> │   ├─signatureFileUrl: \"https://isd.digital.nhs.uk/downl...\" #> │   ├─signatureFileName: \"trud_CHC_JSON_v1.0.2.sig\" #> │   ├─signatureFileSizeBytes: 488 #> │   ├─signatureFileLastModifiedTimestamp: \"2022-02-02T09:21:58.000Z\" #> │   ├─publicKeyFileUrl: \"https://isd.digital.nhs.uk/downl...\" #> │   ├─publicKeyFileName: \"trud-public-key-2013-04-01.pgp\" #> │   ├─publicKeyFileSizeBytes: 1736 #> │   └─publicKeyId: 6 #> ├─httpStatus: 200 #> └─message: \"OK\" # by default this will be downloaded to `tempdir()` x <- download_item(1760) #> ⠙ Downloading archive file for TRUD item 1760... #> ✔ Downloading archive file for TRUD item 1760... [260ms] #>  #> ℹ Successfully downloaded `CHC_JSON_v1.0.2.zip` to '/var/folders/zt/jltqykf54y3… #> ✔ Successfully downloaded `CHC_JSON_v1.0.2.zip` to '/var/folders/zt/jltqykf54y3… #>  unzip(x, list = TRUE) #>                                             Name Length                Date #> 1        JSON_CHC_V1_0_2_Simple_Schema_v1.1.json  14224 2022-01-27 12:01:00 #> 2 JSON_CHC_V1_0_2_Simple_Schema_SAMPLE_DATA.json   5492 2022-01-27 14:23:00 #> 3          CHC Production Log - JSON SIMPLE.xlsx  21520 2022-01-27 14:33:00"},{"path":"https://rmgpanw.github.io/trud/reference/download_item.html","id":null,"dir":"Reference","previous_headings":"","what":"Download NHS TRUD item — download_item","title":"Download NHS TRUD item — download_item","text":"Downloads files specified NHS TRUD item (requires subscription). default latest release.","code":""},{"path":"https://rmgpanw.github.io/trud/reference/download_item.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Download NHS TRUD item — download_item","text":"","code":"download_item(   item,   directory = tempdir(),   download_file = \"archive\",   TRUD_API_KEY = NULL,   release = NULL )"},{"path":"https://rmgpanw.github.io/trud/reference/download_item.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Download NHS TRUD item — download_item","text":"item integer, item downloaded. directory Path directory item downloaded . set current session's temporary directory default. download_file item file downloaded. Valid values: \"archive\" (release item) \"checksum\" \"signature\" \"publickKey\" TRUD_API_KEY string. name environmental variable containing TRUD API key. NULL (default) assumed called TRUD_API_KEY. release name specific release ID downloaded (can ascertained using get_item_metadata()). NULL (default), latest item release downloaded.","code":""},{"path":"https://rmgpanw.github.io/trud/reference/download_item.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Download NHS TRUD item — download_item","text":"file path downloaded file, returned invisibly.","code":""},{"path":"https://rmgpanw.github.io/trud/reference/download_item.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Download NHS TRUD item — download_item","text":"","code":"# \\dontrun{  # Download NHS Continuing Health Care (CHC) Data Set - JSON Schema  x <- download_item(1760) #> Error in httr2::req_perform(.): HTTP 404 Not Found. #> ✖ HTTP Status 404: Not Found #> ! Unexpected error. Is the TRUD website down?   # List downloaded files  unzip(x, list = TRUE) #> Error in eval(expr, envir, enclos): object 'x' not found # }"},{"path":"https://rmgpanw.github.io/trud/reference/get_item_metadata.html","id":null,"dir":"Reference","previous_headings":"","what":"Retrieve metadata for a NHS TRUD item — get_item_metadata","title":"Retrieve metadata for a NHS TRUD item — get_item_metadata","text":"Sends request release list endpoint, returning list metadata pertaining specified NHS TRUD item.","code":""},{"path":"https://rmgpanw.github.io/trud/reference/get_item_metadata.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Retrieve metadata for a NHS TRUD item — get_item_metadata","text":"","code":"get_item_metadata(item, TRUD_API_KEY = NULL, latest_only = FALSE)"},{"path":"https://rmgpanw.github.io/trud/reference/get_item_metadata.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Retrieve metadata for a NHS TRUD item — get_item_metadata","text":"item integer, item downloaded. TRUD_API_KEY string. name environmental variable containing TRUD API key. NULL (default) assumed called TRUD_API_KEY. latest_only TRUE, metadata pertaining latest item release retrieved. default set FALSE.","code":""},{"path":"https://rmgpanw.github.io/trud/reference/get_item_metadata.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Retrieve metadata for a NHS TRUD item — get_item_metadata","text":"list.","code":""},{"path":"https://rmgpanw.github.io/trud/reference/get_item_metadata.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Retrieve metadata for a NHS TRUD item — get_item_metadata","text":"","code":"# \\dontrun{  # Get metadata for NHS Continuing Health Care (CHC) Data Set - JSON Schema  get_item_metadata(1760, latest_only = TRUE) #> Error in httr2::req_perform(.): HTTP 404 Not Found. #> ✖ HTTP Status 404: Not Found #> ! Unexpected error. Is the TRUD website down? # }"},{"path":"https://rmgpanw.github.io/trud/reference/pipe.html","id":null,"dir":"Reference","previous_headings":"","what":"Pipe operator — %>%","title":"Pipe operator — %>%","text":"See magrittr::%>% details.","code":""},{"path":"https://rmgpanw.github.io/trud/reference/pipe.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Pipe operator — %>%","text":"","code":"lhs %>% rhs"},{"path":"https://rmgpanw.github.io/trud/reference/pipe.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Pipe operator — %>%","text":"lhs value magrittr placeholder. rhs function call using magrittr semantics.","code":""},{"path":"https://rmgpanw.github.io/trud/reference/pipe.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Pipe operator — %>%","text":"result calling rhs(lhs).","code":""},{"path":"https://rmgpanw.github.io/trud/reference/trud-package.html","id":null,"dir":"Reference","previous_headings":"","what":"trud: Query the NHS TRUD API — trud-package","title":"trud: Query the NHS TRUD API — trud-package","text":"convenient R interface NHS TRUD API.","code":""},{"path":[]},{"path":"https://rmgpanw.github.io/trud/reference/trud-package.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"trud: Query the NHS TRUD API — trud-package","text":"Maintainer: Alasdair Warwick alasdair.warwick06@gmail.com (ORCID) [copyright holder]","code":""},{"path":"https://rmgpanw.github.io/trud/reference/trud_items.html","id":null,"dir":"Reference","previous_headings":"","what":"Get available NHS TRUD items — trud_items","title":"Get available NHS TRUD items — trud_items","text":"Scrapes page NHS TRUD website available items.","code":""},{"path":"https://rmgpanw.github.io/trud/reference/trud_items.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get available NHS TRUD items — trud_items","text":"","code":"trud_items()"},{"path":"https://rmgpanw.github.io/trud/reference/trud_items.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Get available NHS TRUD items — trud_items","text":"tibble, columns item_number item_name.","code":""},{"path":"https://rmgpanw.github.io/trud/reference/trud_items.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Get available NHS TRUD items — trud_items","text":"","code":"# \\dontrun{  trud_items() #> Error in open.connection(x, \"rb\"): HTTP error 404. # }"}]
